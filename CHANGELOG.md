# Changelog

## [0.3.1] - 2025-10-08
### Added
- Добавлен эндпоинт `/ping` во все микросервисы (`health-data-service`, `telegram-input-service`, `pdf-service`) для проверки доступности.
- Эндпоинт используется для health check в Render и при отладке взаимодействия между микросервисами.

## [0.3.0] - 2025-10-06
### Added
- Новый микросервис `pdf-service` для формирования PDF-отчётов с данными о давлении.
- Интеграция `telegram-input-service` с `pdf-service` через REST.
- Класс `PdfClient` для взаимодействия с PDF API.
- Пакет `messages` с классами для десериализации запрограммированных ответов бота.
- Текстовые ответы бота вынесены в отдельный файл `messages.yaml`.
- Класс `PressureLimits` для десериализации лимитов давления и пульса.
- Настройка лимитов давления через `application.yaml`.
- Класс `FileNameFormatter` для генерации имён PDF-файлов.
### Changed
- **Рефакторинг архитектуры обработки команд**:
 - Разделение команд на отдельные специализированные обработчики в пакете `handler`.
 - Упрощено добавление новых команд и модификация существующих.
### Removed
- Удалён `TelegramCommandHandler` в связи с новой архитектурой обработки команд.

## [0.2.1] - 2025-06-02

### Fixed
- Исправлена ошибка при форматировании записей давления, если данные отсутствуют или недоступны.
- Улучшена обработка некорректного ввода даты: добавлены проверки и сообщения об ошибке.
- Устранено потенциальное падение при `null`-значениях в ответах от сервиса данных.
- Добавлены явные `return`-выходы в ветках `if`, чтобы избежать лишней логики выполнения.

### Changed
- Повышена читаемость метода `handleDateInput`: убраны дублирующиеся `return`, унифицирована структура `if/else`.

## [0.2.0] - 2025-06-02
### Added
- Делегирование логики из `TelegramBotService` в `TelegramCommandHandler` для соблюдения принципа единой ответственности (SRP).
- Класс `TelegramCommandHandler` для обработки текстовых команд и переходов между состояниями пользователя.
- Класс `KeyboardFactory` для генерации клавиатур Telegram (главное меню, подменю и т.п.).
- Класс `HealthDataClient` для взаимодействия с REST API сервиса хранения данных с обработкой ошибок.

### Changed
- `TelegramBotService` теперь делегирует всю логику и содержит только минимальную маршрутизацию

### Removed
- Избыточные зависимости (`RestTemplate`, `HealthDataClient`, и др.) удалены из `TelegramBotService`